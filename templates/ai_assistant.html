{% extends "base.html" %}

{% block title %}AI Article Assistant{% endblock %}

{% block content %}
<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h1 class="text-3xl font-bold text-gray-900 mb-8">ðŸ¤– AI Article Assistant</h1>
    
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
        <!-- Article Input Form -->
        <div class="lg:col-span-2">
            <div class="bg-white rounded-lg shadow-md p-6">
                <h2 class="text-xl font-semibold text-gray-900 mb-4">Analyze an Article</h2>
                <p class="text-gray-600 mb-6">Enter a URL to an article to get a summary and chat with our AI assistant about the content.</p>
                
                <form method="POST" class="space-y-6">
                    {{ form.csrf_token }}
                    
                    <div>
                        <label for="article_url" class="block text-sm font-medium text-gray-700">Article URL</label>
                        {{ form.article_url(class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 px-4 py-2", placeholder="https://...") }}
                        {% if form.article_url.errors %}
                            <p class="mt-1 text-sm text-red-600">{{ form.article_url.errors[0] }}</p>
                        {% endif %}
                        <p class="text-xs text-gray-500 mt-2">Enter a URL to an article, and we'll extract its content for analysis.</p>
                    </div>
                    
                    <div>
                        {{ form.submit(class="w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500") }}
                    </div>
                </form>
            </div>
            
            <div class="mt-8 bg-blue-50 rounded-lg shadow-md p-6">
                <h3 class="text-lg font-semibold text-blue-900 mb-3">How it works:</h3>
                <ol class="list-decimal list-inside space-y-2 text-blue-800">
                    <li>Enter the URL of any article you want to analyze</li>
                    <li>Our AI will extract the content and generate a summary</li>
                    <li>You can ask questions about the article to get more insights</li>
                    <li>The AI will focus only on information contained in the article</li>
                </ol>
                <p class="mt-4 text-sm text-blue-700">Note: AI responses are generated based on the article content only. For best results, use URLs from reputable news sources.</p>
            </div>
        </div>
        
        <!-- Previous Sessions -->
        <div class="lg:col-span-1">
            <div class="bg-white rounded-lg shadow-md p-6">
                <h2 class="text-xl font-semibold text-gray-900 mb-4">Your Previous Sessions</h2>
                
                {% if user_sessions %}
                    <div class="space-y-4">
                        {% for session in user_sessions %}
                            <div class="border-b border-gray-200 pb-4">
                                <a href="{{ url_for('chat_session', session_id=session.id) }}" class="block hover:bg-gray-50 rounded-md p-2 -mx-2">
                                    <h3 class="font-medium text-gray-900 truncate">{{ session.title }}</h3>
                                    <p class="text-sm text-gray-500">{{ session.created_at.strftime('%b %d, %Y') }}</p>
                                </a>
                                <form action="{{ url_for('delete_chat_session', session_id=session.id) }}" method="POST" class="mt-2">
                                    <button type="submit" class="text-red-600 text-xs hover:text-red-800" onclick="return confirm('Are you sure you want to delete this session?')">
                                        Delete
                                    </button>
                                </form>
                            </div>
                        {% endfor %}
                    </div>
                {% elif current_user.is_authenticated %}
                    <p class="text-gray-600">You haven't analyzed any articles yet.</p>
                {% else %}
                    <p class="text-gray-600"><a href="{{ url_for('login') }}" class="text-green-600 hover:underline">Log in</a> to save your chat sessions.</p>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %} 